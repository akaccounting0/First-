<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AS ENGINEERING</title>
  <style>
    :root {
      --bg: #ffffff;
      --text: #000000;
      --table: #f2f2f2;
    }
    [data-theme="dark"] {
      --bg: #121212;
      --text: #ffffff;
      --table: #1e1e1e;
    }
    body {
      background-color: var(--bg);
      color: var(--text);
      font-family: Arial, sans-serif;
      padding: 20px;
      transition: all 0.3s ease;
    }
    h1, h2 {
      text-align: center;
    }
    h2 {
      margin-top: -10px;
      color: #2c7;
    }
    #logo {
      display: block;
      margin: 0 auto;
      width: 80px;
    }
    .controls {
      text-align: center;
      margin: 20px 0;
    }
    .controls button {
      margin: 5px;
      padding: 8px 16px;
      font-size: 14px;
    }
    form {
      display: none;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      max-width: 600px;
      margin: auto;
      margin-bottom: 20px;
    }
    input, button {
      padding: 8px;
      font-size: 14px;
    }
    #leave {
      color: transparent;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    table, th, td {
      border: 1px solid var(--text);
    }
    th, td {
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: var(--table);
    }
    .salary-slip {
      cursor: pointer;
      color: blue;
      text-decoration: underline;
    }
    .slip-popup {
      display: none;
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: white;
      border: 2px solid black;
      padding: 20px;
      z-index: 999;
    }
    .slip-popup img {
      width: 100%;
    }
  </style>
</head>
<body data-theme="light">

  <img id="logo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/React-icon.svg/1024px-React-icon.svg.png" alt="Company Logo">
  <h1>AS ENGINEERING</h1>
  <h2>SALARY RECORD 2025</h2>

  <div class="controls">
    <button onclick="toggleForm()">+ Add Worker</button>
    <button onclick="toggleTheme()">ðŸŒ— Toggle Dark/Light Mode</button>
  </div>

  <form id="salary-form">
    <input type="text" id="name" placeholder="Employee Name" required>
    <input type="text" id="id" placeholder="Employee ID" required>
    <input type="number" id="present" placeholder="Total Present" required>
    <input type="number" id="leave" placeholder="Leave Days" required>
    <input type="number" id="absent" placeholder="Absent Days" required>
    <input type="number" id="overtime" placeholder="Overtime Hours" required>
    <input type="number" id="salary" placeholder="Monthly Salary" required>
    <input type="number" id="advance" placeholder="Advance Payment" required>
    <input type="password" id="pincode" placeholder="Enter PIN: 529427" required>
    <button type="submit">Add Record</button>
  </form>

  <table>
    <thead>
      <tr>
        <th>Serial No</th>
        <th>Name</th>
        <th>ID</th>
        <th>Present</th>
        <th>Leave</th>
        <th>Absent</th>
        <th>Actual Present</th>
        <th>Work Hours</th>
        <th>Overtime</th>
        <th>Total Hours</th>
        <th>Salary</th>
        <th>Advance</th>
        <th>Net Salary</th>
        <th>Slip</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="salary-table-body"></tbody>
  </table>

  <div id="slip" class="slip-popup"></div>

  <script>
    let serial = 1;
    const pinCode = "529427";

    function toggleForm() {
      const form = document.getElementById("salary-form");
      form.style.display = form.style.display === "grid" ? "none" : "grid";
    }

    function toggleTheme() {
      const body = document.body;
      const current = body.getAttribute("data-theme");
      body.setAttribute("data-theme", current === "dark" ? "light" : "dark");
    }

    function showSlip(emp) {
      const slip = document.getElementById("slip");
      slip.style.display = "block";
      slip.innerHTML = `
        <div>
          <h2>Salary Slip</h2>
          <p><strong>Name:</strong> ${emp.name}</p>
          <p><strong>ID:</strong> ${emp.id}</p>
          <p><strong>Total Present:</strong> ${emp.present}</p>
          <p><strong>Leave:</strong> ${emp.leave}</p>
          <p><strong>Absent:</strong> ${emp.absent}</p>
          <p><strong>Actual Present:</strong> ${emp.actualPresent}</p>
          <p><strong>Work Hours:</strong> ${emp.workHours}</p>
          <p><strong>Overtime:</strong> ${emp.overtime}</p>
          <p><strong>Total Hours:</strong> ${emp.totalHours}</p>
          <p><strong>Salary:</strong> â‚¹${emp.salary}</p>
          <p><strong>Advance:</strong> â‚¹${emp.advance}</p>
          <p><strong>Net Salary:</strong> â‚¹${emp.netSalary}</p>
          <button onclick="document.getElementById('slip').style.display='none'">Close</button>
        </div>
      `;
    }

    document.getElementById("salary-form").addEventListener("submit", function(e) {
      e.preventDefault();
      const enteredPin = document.getElementById("pincode").value;
      if (enteredPin !== pinCode) {
        alert("Invalid PIN Code");
        return;
      }

      const emp = {
        name: document.getElementById("name").value,
        id: document.getElementById("id").value,
        present: Math.max(0, parseInt(document.getElementById("present").value)),
        leave: Math.max(0, parseInt(document.getElementById("leave").value)),
        absent: Math.max(0, parseInt(document.getElementById("absent").value)),
        overtime: Math.max(0, parseInt(document.getElementById("overtime").value)),
        salary: Math.max(0, parseInt(document.getElementById("salary").value)),
        advance: Math.max(0, parseInt(document.getElementById("advance").value))
      };

      emp.actualPresent = emp.present - emp.absent;
      emp.workHours = emp.actualPresent * 8;
      emp.totalHours = emp.workHours + emp.overtime;
      emp.netSalary = Math.max(0, emp.salary - emp.advance);

      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${serial++}</td>
        <td>${emp.name}</td>
        <td>${emp.id}</td>
        <td>${emp.present}</td>
        <td>${emp.leave}</td>
        <td>${emp.absent}</td>
        <td>${emp.actualPresent}</td>
        <td>${emp.workHours}</td>
        <td>${emp.overtime}</td>
        <td>${emp.totalHours}</td>
        <td>â‚¹${emp.salary}</td>
        <td>â‚¹${emp.advance}</td>
        <td>â‚¹${emp.netSalary}</td>
        <td><span class="salary-slip" onclick='showSlip(${JSON.stringify(emp)})'>View</span></td>
        <td><button onclick='editRow(this)'>Edit</button> <button onclick='deleteRow(this)'>Delete</button></td>
      `;
      document.getElementById("salary-table-body").appendChild(row);
      document.getElementById("salary-form").reset();
      toggleForm();
    });

    function editRow(button) {
      const pin = prompt("Enter PIN to Edit:");
      if (pin !== pinCode) {
        alert("Incorrect PIN");
        return;
      }
      const row = button.closest("tr");
      row.style.backgroundColor = "#ffc";
      alert("Now you can manually change data in row (for demo, not saved)");
    }

    function deleteRow(button) {
      const pin = prompt("Enter PIN to Delete:");
      if (pin !== pinCode) {
        alert("Incorrect PIN");
        return;
      }
      const row = button.closest("tr");
      row.remove();
    }
  </script>

</body>
</html>
